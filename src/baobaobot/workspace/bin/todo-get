#!/usr/bin/env python3
"""Show full details of a TODO item.

Usage:
    todo-get ID [--workspace DIR]
"""

from __future__ import annotations

import argparse
import sys
from pathlib import Path

sys.path.insert(0, str(Path(__file__).resolve().parent))
from _todo_common import connect_db, format_todo_detail, get_todo, resolve_workspace


def main() -> None:
    parser = argparse.ArgumentParser(description="Show TODO details")
    parser.add_argument("id", help="TODO ID (e.g. T20260225-1)")
    parser.add_argument("--workspace", default=None, help="Workspace directory")
    args = parser.parse_args()

    workspace = resolve_workspace(args.workspace)
    conn = connect_db(workspace)

    row = get_todo(conn, args.id)
    if row is None:
        print(f"‚ùå TODO not found: {args.id}", file=sys.stderr)
        conn.close()
        sys.exit(1)

    print(format_todo_detail(row))
    conn.close()


if __name__ == "__main__":
    main()

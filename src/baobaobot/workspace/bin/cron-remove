#!/usr/bin/env python3
"""Remove a cron job from the workspace.

Usage:
    cron-remove <job_id> [--workspace PATH]

Examples:
    cron-remove a1b2c3d4
"""

import argparse
import sys

from _cron_common import connect_db, remove_job, resolve_workspace


def main():
    parser = argparse.ArgumentParser(description="Remove a cron job")
    parser.add_argument("job_id", help="Job ID to remove")
    parser.add_argument("--workspace", default=None, help="Workspace path")
    args = parser.parse_args()

    workspace = resolve_workspace(args.workspace)
    if not workspace.exists():
        print(f"Workspace not found: {workspace}", file=sys.stderr)
        sys.exit(1)

    conn = connect_db(workspace)
    try:
        removed = remove_job(conn, args.job_id)
    finally:
        conn.close()

    if not removed:
        print(f"Job not found: {args.job_id}", file=sys.stderr)
        sys.exit(1)

    print(f"âœ… Job removed: {args.job_id}")


if __name__ == "__main__":
    main()
